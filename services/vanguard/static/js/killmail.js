var package = {
    "attributes": {
        "ship": {
            "agility": 0.320625,
            "armorAvgDamageResonance": 0.6749999999999999,
            "armorEmDamageResonance": 0.4,
            "armorExplosiveDamageResonance": 0.9,
            "armorHP": 2250,
            "armorKineticDamageResonance": 0.75,
            "armorMaxDamageResonance": 0.9,
            "armorMinDamageResonance": 0.4,
            "armorThermalDamageResonance": 0.65,
            "armorUniformity": 0.75,
            "avgDamageResonance": 0.67,
            "avgEHP": 6616.8296448790525,
            "avgRPS": 7.758620689655173,
            "baseWarpSpeed": 1,
            "bcLargeTurretCPU": 0.5,
            "bcLargeTurretPower": 0.05,
            "capacitorCapacity": 3375,
            "capacitorFraction": 0.8461007230514647,
            "capacitorStable": 1,
            "capacity": 535,
            "cpuLoad": 299,
            "cpuOutput": 427.5,
            "cpuRemaining": 128.5,
            "emDamageResonance": 0.67,
            "explosiveDamageResonance": 0.67,
            "fwLpKill": 200,
            "gfxBoosterID": 397,
            "heatAttenuationHi": 0.82,
            "heatAttenuationLow": 0.63,
            "heatAttenuationMed": 0.71,
            "heatCapacityHi": 100,
            "heatCapacityLow": 100,
            "heatCapacityMed": 100,
            "heatDissipationRateHi": 0.01,
            "heatDissipationRateLow": 0.01,
            "heatDissipationRateMed": 0.01,
            "heatGenerationMultiplier": 0.65,
            "hiSlots": 8,
            "hp": 2250,
            "kineticDamageResonance": 0.67,
            "lowSlots": 4,
            "mainColor": 16777215,
            "mass": 15228000,
            "maxDamageResonance": 0.67,
            "maxDirectionalVelocity": 2000,
            "maxEHP": 8083.20895522388,
            "maxLockedTargets": 6,
            "maxPassengers": 450,
            "maxRPS": 11.250000000000002,
            "maxTargetRange": 75000,
            "maxVelocity": 281.25,
            "medSlots": 5,
            "minDamageResonance": 0.67,
            "minEHP": 5720.70895522388,
            "minRPS": 5.625000000000001,
            "minTargetVelDmgMultiplier": 0.25,
            "powerLoad": 1178,
            "powerOutput": 1512.5,
            "powerRemaining": 334.5,
            "powerToSpeed": 1,
            "propulsionGraphicID": 397,
            "radius": 246,
            "rechargeRate": 506250,
            "requiredSkill1": 33098,
            "requiredSkill1Level": 1,
            "rigSize": 2,
            "rigSlots": 3,
            "scanLadarStrength": 20.4,
            "scanResolution": 907.6467705449306,
            "scanSpeed": 3375,
            "shieldAvgDamageResonance": 0.7250000000000001,
            "shieldCapacity": 2362.5,
            "shieldEmDamageResonance": 1,
            "shieldExplosiveDamageResonance": 0.5,
            "shieldKineticDamageResonance": 0.6,
            "shieldMaxDamageResonance": 1,
            "shieldMinDamageResonance": 0.5,
            "shieldRechargeRate": 1050000,
            "shieldThermalDamageResonance": 0.8,
            "shieldUniformity": 1,
            "shipBonusMBC1": -25,
            "shipBonusMBC2": 25,
            "signatureRadius": 195,
            "structureUniformity": 1,
            "techLevel": 1,
            "thermalDamageResonance": 0.67,
            "typeColorScheme": 11342,
            "uniformity": 1,
            "upgradeCapacity": 400,
            "upgradeSlotsLeft": 3,
            "volume": 216000,
            "warpCapacitorNeed": 4.065e-7,
            "warpSpeedMultiplier": 2.7
        },
        "modules": {
            "0": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 30,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "1": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 33,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "10": {
                "hp": 40,
                "location": 92,
                "mass": 200,
                "powerEngineeringOutputBonus": 10,
                "radius": 100,
                "rigSize": 2,
                "techLevel": 1,
                "typeID": 31360,
                "upgradeCost": 100,
                "volume": 10
            },
            "11": {
                "aoeCloudSizeBonusBonus": 100,
                "aoeVelocityBonusBonus": 100,
                "capacitorNeed": 7,
                "capacity": 1,
                "chargeGroup1": 907,
                "chargeSize": 1,
                "chargeTypeID": 29001,
                "cpu": 32,
                "duration": 10000,
                "falloffBonusBonus": -100,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.475,
                "hp": 40,
                "launcherGroup": 213,
                "launcherGroup2": 209,
                "launcherGroup3": 646,
                "location": 23,
                "mainColor": 11646664,
                "mass": 1,
                "maxRangeBonusBonus": -100,
                "overloadTrackingModuleStrengthBonus": 15,
                "power": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3317,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "techLevel": 1,
                "trackingSpeedBonus": 20,
                "trackingSpeedBonusBonus": 100,
                "typeID": 1977,
                "volume": 1
            },
            "12": {
                "cpu": 30,
                "damageMultiplier": 1.1,
                "hp": 40,
                "location": 11,
                "metaLevel": 5,
                "power": 1,
                "requiredSkill1": 3318,
                "requiredSkill1Level": 4,
                "speedMultiplier": 0.895,
                "techLevel": 2,
                "typeID": 519,
                "volume": 5
            },
            "13": {
                "cpu": 30,
                "damageMultiplier": 1.1,
                "hp": 40,
                "location": 13,
                "metaLevel": 5,
                "power": 1,
                "requiredSkill1": 3318,
                "requiredSkill1Level": 4,
                "speedMultiplier": 0.895,
                "techLevel": 2,
                "typeID": 519,
                "volume": 5
            },
            "14": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 31,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "15": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 34,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "16": {
                "capacitorNeed": 10,
                "capacity": 1,
                "chargeGroup1": 910,
                "chargeSize": 1,
                "chargeTypeID": 29011,
                "cpu": 12,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.55,
                "hp": 40,
                "launcherGroup": 212,
                "launcherGroup2": 290,
                "location": 22,
                "mainColor": 11646664,
                "mass": 1,
                "maxTargetRangeBonusBonus": -100,
                "overloadSensorModuleStrengthBonus": 15,
                "power": 1,
                "radius": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3428,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "scanResolutionBonus": 50,
                "scanResolutionBonusBonus": 100,
                "sensorStrengthBonusBonus": -100,
                "techLevel": 1,
                "typeID": 1973,
                "volume": 1
            },
            "17": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 28,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "2": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 32,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "3": {
                "capacitorNeed": 10,
                "capacity": 1,
                "chargeGroup1": 910,
                "chargeSize": 1,
                "chargeTypeID": 29011,
                "cpu": 12,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.55,
                "hp": 40,
                "launcherGroup": 212,
                "launcherGroup2": 290,
                "location": 19,
                "mainColor": 11646664,
                "mass": 1,
                "maxTargetRangeBonusBonus": -100,
                "overloadSensorModuleStrengthBonus": 15,
                "power": 1,
                "radius": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3428,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "scanResolutionBonus": 50,
                "scanResolutionBonusBonus": 100,
                "sensorStrengthBonusBonus": -100,
                "techLevel": 1,
                "typeID": 1973,
                "volume": 1
            },
            "4": {
                "cpu": 30,
                "damageMultiplier": 1.1,
                "hp": 40,
                "location": 12,
                "metaLevel": 5,
                "power": 1,
                "requiredSkill1": 3318,
                "requiredSkill1Level": 4,
                "speedMultiplier": 0.895,
                "techLevel": 2,
                "typeID": 519,
                "volume": 5
            },
            "5": {
                "capacitorNeed": 10,
                "capacity": 1,
                "chargeGroup1": 910,
                "chargeSize": 1,
                "chargeTypeID": 29011,
                "cpu": 12,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.55,
                "hp": 40,
                "launcherGroup": 212,
                "launcherGroup2": 290,
                "location": 21,
                "mainColor": 11646664,
                "mass": 1,
                "maxTargetRangeBonusBonus": -100,
                "overloadSensorModuleStrengthBonus": 15,
                "power": 1,
                "radius": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3428,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "scanResolutionBonus": 50,
                "scanResolutionBonusBonus": 100,
                "sensorStrengthBonusBonus": -100,
                "techLevel": 1,
                "typeID": 1973,
                "volume": 1
            },
            "6": {
                "capacitorCapacityMultiplier": 1,
                "capacitorRechargeRateMultiplier": 1,
                "cpu": 15,
                "hp": 40,
                "location": 14,
                "mass": 20,
                "powerOutputMultiplier": 1.1,
                "radius": 500,
                "requiredSkill1": 3424,
                "requiredSkill1Level": 2,
                "shieldCapacityMultiplier": 1,
                "shieldRechargeRateMultiplier": 1,
                "techLevel": 1,
                "typeID": 1353,
                "volume": 5
            },
            "7": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 29,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            },
            "8": {
                "capacitorNeed": 10,
                "capacity": 1,
                "chargeGroup1": 910,
                "chargeSize": 1,
                "chargeTypeID": 29011,
                "cpu": 12,
                "duration": 10000,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 2.55,
                "hp": 40,
                "launcherGroup": 212,
                "launcherGroup2": 290,
                "location": 20,
                "mainColor": 11646664,
                "mass": 1,
                "maxTargetRangeBonusBonus": -100,
                "overloadSensorModuleStrengthBonus": 15,
                "power": 1,
                "radius": 1,
                "reloadTime": 0.01,
                "requiredSkill1": 3428,
                "requiredSkill1Level": 1,
                "requiredThermoDynamicsSkill": 1,
                "scanResolutionBonus": 50,
                "scanResolutionBonusBonus": 100,
                "sensorStrengthBonusBonus": -100,
                "techLevel": 1,
                "typeID": 1973,
                "volume": 1
            },
            "9": {
                "capacity": 0.5,
                "chargeGroup1": 83,
                "chargeRate": 1,
                "chargeSize": 3,
                "cpu": 14.25,
                "damageMultiplier": 22.298722700920067,
                "duration": 16582.598965869172,
                "falloff": 54687.5,
                "heatAbsorbtionRateModifier": 0.01,
                "heatDamage": 1.95,
                "hp": 40,
                "location": 27,
                "mass": 2000,
                "maxRange": 57500,
                "metaLevel": 3,
                "optimalSigRadius": 40000,
                "overloadRofBonus": -15,
                "power": 146.25,
                "radius": 2000,
                "reloadTime": 10000,
                "requiredSkill1": 3308,
                "requiredSkill1Level": 1,
                "requiredSkill2": 3300,
                "requiredSkill2Level": 5,
                "requiredThermoDynamicsSkill": 1,
                "slots": 1,
                "speed": 16582.598965869172,
                "techLevel": 1,
                "trackingSpeed": 1.3499999999999999,
                "typeColorScheme": 11342,
                "typeID": 9497,
                "volume": 20
            }
        },
        "types": {
            "1353": "Reactor Control Unit I",
            "1973": "Sensor Booster I",
            "1977": "Tracking Computer I",
            "29001": "Tracking Speed Script",
            "29011": "Scan Resolution Script",
            "31360": "Medium Ancillary Current Router I",
            "4310": "Tornado",
            "519": "Gyrostabilizer II",
            "9497": "1400mm Prototype Siege Cannon"
        },
        "typeID": 4310
    },
    "killmail": {
        "attackers": [
            {
                "character_id": 96930809,
                "corporation_id": 98517862,
                "damage_done": 3318,
                "final_blow": true,
                "security_status": 4.6,
                "ship_type_id": 4310,
                "weapon_type_id": 4310
            },
            {
                "corporation_id": 1000125,
                "damage_done": 2496,
                "ship_type_id": 3885
            },
            {
                "character_id": 94303435,
                "corporation_id": 98544380,
                "damage_done": 499,
                "security_status": 5.1,
                "ship_type_id": 16242,
                "weapon_type_id": 16242
            },
            {
                "alliance_id": 99005382,
                "character_id": 161684017,
                "corporation_id": 98057065,
                "security_status": -1.7,
                "ship_type_id": 29990,
                "weapon_type_id": 499
            },
            {
                "character_id": 2114275677,
                "corporation_id": 98570941,
                "ship_type_id": 16242,
                "weapon_type_id": 8869
            }
        ],
        "killmail_id": 71987946,
        "killmail_time": "2018-08-20T14:58:46-07:00",
        "solar_system_id": 30000142,
        "victim": {
            "character_id": 2112781897,
            "corporation_id": 98560403,
            "damage_taken": 6313,
            "items": [
                {
                    "flag": 30,
                    "item_type_id": 9497,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 23,
                    "item_type_id": 1977,
                    "quantity_dropped": 1
                },
                {
                    "flag": 33,
                    "item_type_id": 9497,
                    "quantity_dropped": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 28999,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 29001,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 21,
                    "item_type_id": 1973,
                    "quantity_dropped": 1
                },
                {
                    "flag": 14,
                    "item_type_id": 1353,
                    "quantity_dropped": 1
                },
                {
                    "flag": 29,
                    "item_type_id": 9497,
                    "quantity_dropped": 1
                },
                {
                    "flag": 32,
                    "item_type_id": 9497,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 11,
                    "item_type_id": 519,
                    "quantity_dropped": 1
                },
                {
                    "flag": 22,
                    "item_type_id": 29011,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 20,
                    "item_type_id": 1973,
                    "quantity_dropped": 1
                },
                {
                    "flag": 27,
                    "item_type_id": 9497,
                    "quantity_dropped": 1
                },
                {
                    "flag": 21,
                    "item_type_id": 29011,
                    "quantity_dropped": 1
                },
                {
                    "flag": 13,
                    "item_type_id": 519,
                    "quantity_dropped": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 21894,
                    "quantity_destroyed": 8
                },
                {
                    "flag": 23,
                    "item_type_id": 29001,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 5,
                    "item_type_id": 21918,
                    "quantity_destroyed": 8
                },
                {
                    "flag": 31,
                    "item_type_id": 9497,
                    "quantity_dropped": 1
                },
                {
                    "flag": 34,
                    "item_type_id": 9497,
                    "quantity_dropped": 1
                },
                {
                    "flag": 19,
                    "item_type_id": 1973,
                    "quantity_dropped": 1
                },
                {
                    "flag": 92,
                    "item_type_id": 31360,
                    "quantity_destroyed": 1
                },
                {
                    "flag": 20,
                    "item_type_id": 29011,
                    "quantity_dropped": 1
                },
                {
                    "flag": 12,
                    "item_type_id": 519,
                    "quantity_dropped": 1
                },
                {
                    "flag": 22,
                    "item_type_id": 1973,
                    "quantity_dropped": 1
                },
                {
                    "flag": 19,
                    "item_type_id": 29011,
                    "quantity_dropped": 1
                },
                {
                    "flag": 28,
                    "item_type_id": 9497,
                    "quantity_destroyed": 1
                }
            ],
            "position": {
                "x": -1.0730337941308687e+11,
                "y": -1.874497889011615e+10,
                "z": 4.364890336380897e+11
            },
            "ship_type_id": 4310
        }
    },
    "nameMap": {
        "1000125": "CONCORD",
        "1353": "Reactor Control Unit I",
        "161684017": "Doctor Per",
        "16242": "Thrasher",
        "1973": "Sensor Booster I",
        "1977": "Tracking Computer I",
        "2112781897": "Godfather S'ulTane",
        "2114275677": "Elizee Loriosa",
        "21894": "Republic Fleet EMP L",
        "21918": "Republic Fleet Phased Plasma L",
        "28999": "Optimal Range Script",
        "29001": "Tracking Speed Script",
        "29011": "Scan Resolution Script",
        "29990": "Loki",
        "31360": "Medium Ancillary Current Router I",
        "3885": "CONCORD Police Captain",
        "4310": "Tornado",
        "499": "Light Missile Launcher I",
        "519": "Gyrostabilizer II",
        "8869": "200mm Light Prototype Automatic Cannon",
        "94303435": "Electra Starfyre",
        "9497": "1400mm Prototype Siege Cannon",
        "96930809": "RestInPeace Harambe",
        "98057065": "Space Knights Templar",
        "98517862": "Tantive Shadow",
        "98544380": "Girl Bandit",
        "98560403": "Godfather of healthy food",
        "98570941": "Anyubi Holdings",
        "99005382": "Jita Holding Inc."
    }
}

$(document).ready(function () {
    populateModules(package)
    getShip(package);
    getAttackers(package);
});

function setResonancePercentage(resonance, value) {
    if (!value) {
        value = 1;
    }
    value = 1 - value;
    value = (value * 100).toFixed(0);
    $('#' + resonance).css('width', value + '%').attr('aria-valuenow', value);
    $('#' + resonance).text(value + "%");
}

function setModuleSlot(type, slot, i) {
    typeNames = package.attributes.types;
    $("#" + type + slot).prepend('<img src="//imageserver.eveonline.com/Type/' + i.typeID + '_32.png" title="' + typeNames[i.typeID] + '" style="height: 32px; width: 32px;">')
    if (i.chargeTypeID > 0) $("#" + type + slot + "l").prepend('<img src="//imageserver.eveonline.com/Type/' + i.chargeTypeID + '_32.png" style="height: 32px; width: 32px;">')
}

function populateModules(package) {
    typeNames = package.attributes.types;
    $.each(package.attributes.modules, function (k, i) {
        switch (i.location) {
            case 27: // hiSlots
                setModuleSlot("high", "1", i);
                break;
            case 28: // hiSlots
                setModuleSlot("high", "2", i);
                break;
            case 29: // hiSlots
                setModuleSlot("high", "3", i);
                break;
            case 30: // hiSlots
                setModuleSlot("high", "4", i);
                break;
            case 31: // hiSlots
                setModuleSlot("high", "5", i);
                break;
            case 32: // hiSlots
                setModuleSlot("high", "6", i);
                break;
            case 33: // hiSlots
                setModuleSlot("high", "7", i);
                break;
            case 34: // hiSlots
                setModuleSlot("high", "8", i);
                break;

            case 19:
                setModuleSlot("mid", "1", i);
                break;
            case 20:
                setModuleSlot("mid", "2", i);
                break;
            case 21:
                setModuleSlot("mid", "3", i);
                break;
            case 22:
                setModuleSlot("mid", "4", i);
                break;
            case 23:
                setModuleSlot("mid", "5", i);
                break;
            case 24:
                setModuleSlot("mid", "6", i);
                break;
            case 25:
                setModuleSlot("mid", "7", i);
                break;
            case 26:
                setModuleSlot("mid", "8", i);
                break;

            case 11:
                setModuleSlot("low", "1", i);
                break;
            case 12:
                setModuleSlot("low", "2", i);
                break;
            case 13:
                setModuleSlot("low", "3", i);
                break;
            case 14:
                setModuleSlot("low", "4", i);
                break;
            case 15:
                setModuleSlot("low", "5", i);
                break;
            case 16:
                setModuleSlot("low", "6", i);
                break;
            case 17:
                setModuleSlot("low", "7", i);
                break;
            case 18:
                setModuleSlot("low", "8", i);
                break;

            case 92:
                setModuleSlot("rig", "1", i);
                break;

            case 93:
                setModuleSlot("rig", "2", i);
                break;
            case 94:
                setModuleSlot("rig", "3", i);
                break;

            case 164:
                setModuleSlot("sub", "1", i);
                break;
            case 165:
                setModuleSlot("sub", "2", i);
                break;
            case 166:
                setModuleSlot("sub", "3", i);
                break;
            case 167:
                setModuleSlot("sub", "4", i);
                break;
            case 168:
                setModuleSlot("sub", "5", i);
                break;
        }
    });
}

function getPortrait(a) {
    return a.character_id == undefined ?
        "corporation/" + a.corporation_id + "_64.png" :
        "character/" + a.character_id + "_64.jpg";
}

function getShipImage(a) {
    return a.ship_type_id + "_32.png";
}

function getWeaponImage(a) {
    return a.weapon_type_id == undefined ?
        a.ship_type_id + "_32.png" :
        a.weapon_type_id + "_32.png";
}

function getThatStuff(a) {
    var theStuff = "";

    if (a.character_id != undefined) theStuff += package.nameMap[a.character_id] + "<br>";
    if (a.corporation_id != undefined) theStuff += package.nameMap[a.corporation_id] + "<br>"
    if (a.alliance_id != undefined) theStuff += package.nameMap[a.alliance_id] + "<br>"

    return theStuff;
}

function getAttackers(package) {
    $("#numInvolved").text(simpleVal(package.killmail.attackers.length) + " Involved");
    var stripe = false;
    $.each(package.killmail.attackers, function (k, a) {
        var row = `
            <div class="row killmail" style="background-color: ${stripe ? "#06100a;" : "#16201a;"} padding: 0px;">
                <div class="col-xs-2 killmail" style="width: 64px">
                    <img src="//imageserver.eveonline.com/${getPortrait(a)}" style="width:64px; height: 64px">
                </div>
                <div class="col-xs-1 killmail" style="width: 32px">
                    <img src="//imageserver.eveonline.com/type/${getShipImage(a)}" style="width:32px; height: 32px">
                    <img src="//imageserver.eveonline.com/type/${getWeaponImage(a)}" style="width:32px; height: 32px">
                </div>
                <div class="col-xs-9 killmail" style="width: 264px;">
                    <div class="row" style="height: 64px; padding: 5px;">
                        <div class="col-xs-9">
                           ${getThatStuff(a)}
                        </div>
                        <div class="col-xs-3" style="height: 64px; text-align: right">
                            ${simpleVal(a.damage_done)}
                        </div>
                    </div>
                </div>
            </div>`;

        $("#attackers").append(row);
        stripe = !stripe;
    });
}

function getShip(package) {
    $("#bigship").prepend('<img src="//imageserver.eveonline.com/Render/' + package.attributes.typeID + '_256.png" style="height: 256px; width: 256px;">')

    var a = package.attributes.ship;
    setResonancePercentage("shieldEm", a.shieldEmDamageResonance)
    setResonancePercentage("shieldTherm", a.shieldThermalDamageResonance)
    setResonancePercentage("shieldKin", a.shieldKineticDamageResonance)
    setResonancePercentage("shieldExp", a.shieldExplosiveDamageResonance)
    setResonancePercentage("armorEm", a.armorEmDamageResonance)
    setResonancePercentage("armorTherm", a.armorThermalDamageResonance)
    setResonancePercentage("armorKin", a.armorKineticDamageResonance)
    setResonancePercentage("armorExp", a.armorExplosiveDamageResonance)
    setResonancePercentage("hullEm", a.emDamageResonance)
    setResonancePercentage("hullTherm", a.thermalDamageResonance)
    setResonancePercentage("hullKin", a.kineticDamageResonance)
    setResonancePercentage("hullExp", a.explosiveDamageResonance)

    $("#ehp").text(simpleVal(a.maxEHP) + " EHP");

    $("#hullHP").text(simpleVal(a.hp) + " HP");
    $("#armorHP").text(simpleVal(a.armorHP) + " HP");
    $("#shieldHP").text(simpleVal(a.shieldCapacity) + " HP");

    $("#rps").text(simpleVal(a.maxRPS) + " EHP/s");

    $("#warpStrength").text(simpleVal(a.totalWarpScrambleStrength));
    $("#webStrength").text(simpleVal(a.stasisWebifierStrength) + "%");
    $("#targets").text(simpleVal(a.maxLockedTargets));
    $("#scanRes").text(simpleVal(a.scanResolution));

    $("#cargo").text(simpleVal(a.capacity) + " m³");

    $("#lockRange").text(simpleVal(a.maxTargetRange / 1000) + " km");
    $("#warpSpeed").text(a.warpSpeedMultiplier.toFixed(1) + " AU/s");

    $("#speed").text(simpleVal(a.maxVelocity) + " km/s");
    $("#mwdSpeed").text(simpleVal(a.maxVelocityMWD) + " km/s");

    $("#sigRadius").text(simpleVal(a.signatureRadius));
    $("#mwdSigRadius").text(simpleVal(a.signatureRadiusMWD));

    $.each(a, function (k, v) {
        switch (k) {
            case "hiSlots": // hiSlots
                $("#hiSlots").attr('src', '/i/fw/' + v + 'h.png');
                break;
            case "medSlots": // medSlots
                $("#medSlots").attr('src', '/i/fw/' + v + 'm.png');
                break;
            case "lowSlots": // lowSlots
                $("#lowSlots").attr('src', '/i/fw/' + v + 'l.png');
                break;
            case "rigSlots": // rigSlots
                $("#rigSlots").attr('src', '/i/fw/' + v + 'r.png');
                break;
            case "maxSubsystems": // SubSystems
                $("#subSlots").attr('src', '/i/fw/' + v + 's.png');
                break;
            case "serviceSlots": // structure services
                $("#subSlots").attr('src', '/i/fw/' + att + 's.png');
                break;
            case "capacitorCapacity":
                if (a.capacitorStable == 1.0) {
                    $("#capacitorDuration").text((100 * a.capacitorFraction).toFixed(0) + "% Stable");
                } else {
                    $("#capacitorDuration").text(convertMS(a.capacitorDuration));
                }

                $("#capacitorDetails").text(simpleVal(v) + " GJ")
                break;
            case "totalDPS":
                $("#totalDamage").html(v.toFixed(0) + " DPS")
                if (a.moduleDPS) $("#offenseModule").html(simpleVal(a.moduleDPS) + " DPS<br>" + simpleVal(a.moduleAlphaDamage) + " Alpha")
                if (a.droneDPS) $("#offenseDrone").html(simpleVal(a.droneDPS) + " DPS<br>" + simpleVal(a.droneAlphaDamage) + " Alpha")
                break;

            case "scanRadarStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanLadarStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanMagnetometricStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "scanGravimetricStrength":
                $("#sensorStrength").text(simpleVal(v));
                break;
            case "remoteArmorDamageAmountPerSecond":
                $("#remoteArmor").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remoteStructureDamageAmountPerSecond":
                $("#remoteHull").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remoteShieldBonusAmountPerSecond":
                $("#remoteShield").text(simpleVal(v) + " hp/s");
                $(".remoteRepair").removeClass('hidden');
                break;
            case "remotePowerTransferAmountPerSecond":
                $("#remotePower").text(simpleVal(v) + " GJ/s");
                $(".remoteRepair").removeClass('hidden');
                break;
        }
    });
}